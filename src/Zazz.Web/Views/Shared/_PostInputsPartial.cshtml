@using Zazz.Core.Models.Data
@using Zazz.Web.Controllers
@{
    Layout = null;

    var categories = Enumerable.Empty<Category>();
    var controller = ViewContext.Controller as BaseController;
    if (controller != null)
    {
        categories = controller.StaticDataRepository.GetCategories();
    }
    
}

<div id="profileTabs">
    <div class="tabbable">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#tab1" data-toggle="tab"><i class="icon-pencil"></i> New Post</a></li>
            <li><a href="#tab2" data-toggle="tab"><i class="icon-camera"></i> Upload Photo</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active row-fluid" id="tab1">
                <textarea data-tag="1" class="span12 blue-borders" placeholder="What's on your mind?" id="postInput"></textarea>
                <button type="button" class="btn btn-primary " id="submitPostBtn" data-target="#selectPostCategoryModal" data-toggle="modal">Submit</button>
            </div>
            <div class="tab-pane margin-ten" id="tab2">
                <p><button data-toggle="modal" data-target="#uploadPicModal" data-callback="uploadPicWithFeed"
                           class="btn btn-info">Upload Photo</button></p>
            </div>
        </div>
    </div>
</div>

@*Post-Categories Modal*@

<div class="modal hide fade" id="selectPostCategoryModal">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Select Category</h3>
    </div>

    <div class="modal-body">
        <div class="categories-select">
            <ul>

                @foreach (var c in categories)
                {
                    <li>
                        <button data-id="@c.Id" type="button" class="btn category-select-btn " data-toggle="button">
                            <img data-active-url="@String.Format("/Images/categories/{0}-active.png", c.Name.ToFileName())" data-default-url="@String.Format("/Images/categories/{0}.png", c.Name.ToFileName())"
                                 src="@String.Format("/Images/categories/{0}.png", c.Name.ToFileName())"/>
                        </button>
                        <div class="text-center">@c.Name</div>
                    </li>
                }

            </ul>
        </div>
        
        <p>
            <button id="selectPostCategoriesBtn" class="btn btn-primary btn-block" style="margin-top: 20px;">Submit</button>
        </p>

    </div>

    <div class="modal-footer">
        
        <a href="#" data-dismiss="modal" class="btn">Close</a>
    </div>
</div>



@Html.Partial("_UploadPicModal", true)