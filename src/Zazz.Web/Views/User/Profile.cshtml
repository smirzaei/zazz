@using Zazz.Core.Models.Data
@model UserProfileViewModel
@{
    ViewBag.Title = "Profile";
}

<div class="container" style="margin-top: 50px;">
    @*COVER IMAGE*@
    <img id="coverImg" class="img-polaroid" src="@Model.CoverPhotoUrl" />

    <div style="min-height: 120px;">

        @*LEFT ITEMS*@
        <div class="pull-left">
            <h4>Major: @Model.Major</h4>
            <h4>@Model.School</h4>
            <h5 class="uppercase">@Model.City</h5>
        </div>

        @*RIGHT ITEMS*@
        <div class="pull-right">
            <span class="pull-right followers-text">Party Web Followers: @Model.FollowersCount</span>
            <br />

            @if (Model.IsTargetUserFollowingCurrentUser)
            {
                <p data-id="@Model.UserId" id="followsYouSign" class="pull-right label label-success">Follows you <i class="icon icon-ok-sign"></i></p>
                <div class="clearfix"></div>
            }

            @if (Model.IsSelf)
            {

            }
            else
            {
                <input type="hidden" id="isClub" value="@Model.IsClub.ToString()"/>
                <div id="followRequestBtnContainer">
                    @if (!Model.IsCurrentUserFollowingTargetUser)
                    {
                        if (Model.AccountType == AccountType.ClubAdmin)
                        {
                            <button data-id="@Model.UserId" data-url="/follow/followuser/@Model.UserId" data-action="follow" class="btn btn-large pull-right btn-info btn-follow">Follow</button>
                        }
                        else
                        {
                            if (Model.FollowRequestAlreadySent)
                            {
                                <button title="Follow request has been sent before. You must wait for the user to accept your request." class="btn btn-large pull-right btn-info disabled" disabled="disabled">Follow Request Sent</button>
                            }
                            else
                            {
                                <button data-id="@Model.UserId" data-url="/follow/followuser/@Model.UserId" data-action="followRequest" class="btn btn-large pull-right btn-info btn-follow">Send Follow Request</button>
                            }
                        }
                    }
                    else
                    {
                        <button data-id="@Model.UserId" data-url="/follow/unfollow/@Model.UserId" data-action="unfollow" class="btn btn-large pull-right btn-info btn-follow">Unfollow</button>
                    }
                </div>
            }

            <div class="clearfix"></div>
        </div>

        @*CENTER ITEMS*@
        <div class="profile-center">
            <img id="profilePic" class="img-polaroid img-rounded" src="@Model.UserPhotoUrl.SmallLink" />
            <h3>@Model.UserName</h3>
        </div>
    </div>

    <div class="clearfix"></div>
    <hr />

    @* TABS *@
    @if (Model.IsSelf)
    {
        <div>
            @Html.Partial("_PostInputsPartial")
        </div>
    }
    else
    {
        <div id="profileTabs">
            <textarea placeholder="Post something on @Model.UserName's wall" id="postInput"></textarea>
            <button type="button" class="btn btn-primary" id="submitPostBtn" data-touser="@Model.UserId">Submit</button>
        </div>
    }
    
    @* LEFT MENU *@
    <div id="leftMenu" class="well light-background">
        <div class="menu-title"><strong>MY CLUBS</strong></div>
        <ul>
            <li><a href="#">Club A</a></li>
            <li><a href="#">Club B</a></li>
            <li><a href="#">Club C</a></li>
            <li><a href="#">Club D</a></li>
        </ul>
        <a href="#" style="font-size: 12px;">MORE...</a>

        <div class="menu-title" style="margin-top: 25px;"><strong>PEOPLE TO PARTY WITH</strong></div>
        <ul>
            <li><a href="#">Person A</a></li>
            <li><a href="#">Person B</a></li>
            <li><a href="#">Person C</a></li>
            <li><a href="#">Person D</a></li>
        </ul>
        <a href="#" style="font-size: 12px;">MORE...</a>
    </div>

    @* FEEDS *@

    <div id="feedContent">
        @Html.Partial("_FeedsPartial", Model.Feeds)
    </div>

    <div class="clearfix"></div>
</div>
@Html.Partial("_UploadPicModal",  new UploadPicModalModel { ModalId = "uploadPicModalWithFeed", CreateFeed = true })

